<div class="container">
<div class="row">
	<div class="col-6">
		<div class="card mt-5 mb-5">
		  <h5 class="card-header" *ngIf="submitMode=='add'">Add	User</h5>
		  <h5 class="card-header" *ngIf="submitMode=='edit'">Edit	User</h5>
		  <div class="card-body">
		    <form class="row g-3" #userForm="ngForm" (ngSubmit)="onCreateUpdateUser(userForm.value)">
				  <div class="col-md-6">
				    <label for="inputFirstName" class="form-label">First Name</label>
				    <input 
				    	type="text"
			            class="form-control"
			            id="first_name"
			            required
			            [ngModel] = 'firstName'
			            name="first_name"
				    />
				  </div>
				  <div class="col-md-6">
				    <label for="inputLastName" class="form-label">Last Name</label>
				    <input 
				    	type="text"
			            class="form-control"
			            id="last_name"
			            required
			            [ngModel] = 'lastName'
			            name="last_name"
				    />
				  </div>
				  <div class="col-md-6">
				    <label for="inputEmail" class="form-label">Email Address</label>
				    <input 
				    	type="text"
			            class="form-control"
			            id="email"
			            required
			            email
			            [ngModel] = 'emailAddress'
			            name="email"
			            #email="ngModel"
				    />
				    <span class="badge bg-danger" *ngIf="!email.valid && email.touched">Email address invalid</span>
				  </div>
				  <div class="col-md-6">
				    <label for="inputPhone" class="form-label">Phone</label>
				    <input 
				    	type="text"
			            class="form-control"
			            id="phone"
			            required
			            [ngModel] = 'phone'
			            name="phone"
				    />
				  </div>
				  <div class="col-12">
				  	<div class="d-grid gap-2 d-md-flex justify-content-md-end">
				    	<button 
				    		type="submit" 
				    		class="btn btn-primary"
				    		[disabled]="!userForm.valid"
				    	>Save</button>
					</div>
				  </div>
			</form>
		  </div>
		</div>
	</div>
</div>

<div class="row mb-3">
    <div class="col-xs-12 col-md-6 col-md-offset-3">      
      <button
        class="btn btn-danger"
        [disabled]="loadedUsers.length < 1"
        (click)="onDeleteUsers()"
      >
        Drop All Users
      </button>
    </div>
  </div>

<div class="row">
	<div class="col-10">
		<p class="mt-3" *ngIf="loadedUsers.length < 1 && !isFetching">No users available!</p>
		<p *ngIf="isFetching && !error">Loading users...</p>
		<div class="alert alert-danger" *ngIf="error">
			<h3>Error Occured!</h3>
			<p>{{ error }}</p>
			<button class="btn btn-info btn-sm" (click)="onHandleError()">Close</button>
		</div>
		<table class="table" *ngIf="loadedUsers.length >= 1 && !isFetching">
		  <thead>
		    <tr>
		      <th scope="col">First Name</th>
		      <th scope="col">Last Name</th>
		      <th scope="col">Email Address</th>
		      <th scope="col">Phone</th>
		      <th scope="col">Action</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr *ngFor="let users of loadedUsers">
		      <td>{{ users.first_name }}</td>
		      <td>{{ users.last_name }}</td>
		      <td>{{ users.email }}</td>
		      <td>{{ users.phone }}</td>
		      <td>
		      	<a href="" 
		      		class="btn btn-warning btn-sm"
		      		[routerLink]="['/user', users.id]"
		      		>
		      		View
		      	</a>
		      	<button 
		      		class="btn btn-info btn-sm"
		      		(click)="onEdit(users)"
		      		>
		        	Edit
		      	</button>
		      	<button 
		      		class="btn btn-danger btn-sm"
		      		(click)="onDeleteUser(users)"
		      		>
		        	Delete
		      	</button>	     	
		      </td>
		    </tr>		    
		  </tbody>
		</table>
	</div>
</div>



</div>
